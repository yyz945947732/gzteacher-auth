<p align="center">
  <a href="https://github.com/yyz945947732/gzteacher-auth">
    <img alt="@gzteacher/auth" src="logo.png" width="280" />
  </a>
</p>

# @gzteacher/auth

> åŸºäº @alifd/next çš„æƒé™ç›¸å…³ç»„ä»¶

<p align="center">
  <a href="https://www.npmjs.com/package/@gzteacher/auth">
    <img src="https://img.shields.io/npm/v/@gzteacher/auth.svg" alt="Version" />
  </a>
  <a href="https://www.npmjs.com/package/@gzteacher/auth">
    <img
      src="https://img.shields.io/npm/dm/@gzteacher/auth.svg"
      alt="download"
    />
  </a>
  <a href="https://coveralls.io/github/yyz945947732/gzteacher-auth?branch=master">
    <img
      src="https://coveralls.io/repos/github/yyz945947732/gzteacher-auth/badge.svg?branch=master"
      alt="Coverage Status"
    />
  </a>
  <a href="https://github.com/yyz945947732/gzteacher-auth/pulls">
    <img
      src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg"
      alt="PRs Welcome"
    />
  </a>
  <a href="/LICENSE">
    <img
      src="https://img.shields.io/badge/license-MIT-blue.svg"
      alt="GitHub license"
    />
  </a>
</p>

## Features

- ğŸ’ **åŸºæœ¬**: åŸºæœ¬çš„æƒé™é€»è¾‘ç»„ä»¶
  - _Provider_: å®šä¹‰æƒé™ç»„ä»¶ä¸Šä¸‹æ–‡
  - _Wrapper_: æœ‰æƒé™æ—¶å±•ç¤ºç»„ä»¶å†…å®¹
  - _DenyWrapper_: æœ‰æƒé™æ—¶ä¸å±•ç¤ºç»„ä»¶å†…å®¹
  - _RouteGuard_: è·¯ç”±æƒé™æ‹¦æˆª
- ğŸ¯ **ç»„ä»¶**: å¯¹`@alifd/next`çš„å¸¸ç”¨ç»„ä»¶æ‰©å±•äº†åŸºæœ¬æƒé™é€»è¾‘
  - _Button_: æ— æƒé™æ—¶å±•ç¤ºä¸ºæ–‡æœ¬
  - _Select_: ä¸‹æ‹‰æ¡†ä¸å±•ç¤ºæ— æƒé™çš„é€‰é¡¹
  - _Tab_: æ ‡ç­¾é¡µä¸å±•ç¤ºæ— æƒé™çš„æ ‡ç­¾
  - _Table_: è¡¨æ ¼ä¸å±•ç¤ºæ— æƒé™çš„åˆ—
  - _Menu_: èœå•ä¸æ˜¾ç¤ºæ— æƒé™çš„èœå•é¡¹
  - _Nav_: å¯¼èˆªæ ä¸æ˜¾ç¤ºæ— æƒé™çš„å¯¼èˆªé¡¹
- ğŸ¤–ï¸ **å®šåˆ¶**: æ”¯æŒè‡ªå®šä¹‰æƒé™éªŒè¯å™¨ä»¥å®ç°æ›´ä¸°å¯Œçš„æƒé™åŠŸèƒ½
  - _Validator_
- ğŸ¦ **ä»£ç†**: æ”¯æŒåœ¨ä¸Šä¸‹æ–‡å†…å°†æƒé™ç¼–ç é‡å®šå‘åˆ°å…¶ä»–æƒé™ç¼–ç 
  - _Proxy_
- ğŸŒ **å·¥å…·**: æƒé™ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„å·¥å…·å‡½æ•°
  - _useAuth_: è¿”å›æƒé™ä¿¡æ¯å’Œæƒé™æ›´æ–°æ–¹æ³•
  - _useMatchAuth_: è¿”å›æ˜¯å¦æœ‰å¯¹åº”æƒé™
  - _useAuthData_: æ ¹æ®ä¼ å…¥é›†åˆè¿”å›æœ‰æƒé™çš„é›†åˆæ•°æ®
- ğŸŒ² **æ ‘å½¢**: æƒé™åŠŸèƒ½æ”¯æŒæ ‘å½¢ç»“æ„
  - _useAuthData_ã€_Select_ã€_Table_ã€_RouteGuard_ ã€_Menu_ã€_Nav_...

## Install

Install with [npm](https://www.npmjs.com/):

```sh
npm install --save @gzteacher/auth
```

Install with [yarn](https://yarnpkg.com/):

```sh
yarn add @gzteacher/auth
```

Install with [pnpm](https://pnpm.io/):

```sh
pnpm add @gzteacher/auth
```

## Usage

ä½¿ç”¨ `Auth.Provider` ç»„ä»¶åŒ…è£¹ä»¥ä½¿ç”¨æƒé™ç›¸å…³ç»„ä»¶ã€‚

```typescript
// index.tsx
import { useState, useEffect } from "react";
import { Auth } from "@gzteacher/auth";

function Layout() {
  const [auth, setAuth] = useState();

  const getAuth = async () => {
    const auth = await getAuth();
    console.log(auth);
    // {
    //    "user.watch": true,
    //    "user.edit": true,
    // }
    setAuth(auth);
  };

  useEffect(() => {
    getAuth();
  }, []);

  return (
    <Auth.Provider auth={auth}>
      <Auth.Wrapper authCode="user.watch">æŸ¥çœ‹</Auth.Wrapper>
      <Auth.Button authCode="user.edit">ç¼–è¾‘</Auth.Button>
    </Auth.Provider>
  );
}
```

##### ice2.js ä¸­ä½¿ç”¨

```typescript
// app.tsx
import { IAppConfig, runApp, useAuth } from "ice";
import { Auth } from "@gzteacher/auth";

const appConfig: IAppConfig = {
  // ...
  app: {
    // ...
    getInitialData: async () => {
      const auth = await getAuth();
      return {
        auth,
      };
    },
    addProvider: ({ children }) => {
      const [auth] = useAuth();
      return <Auth.Provider auth={auth}>{children}</Auth.Provider>;
    },
  },
};

runApp(appConfig);
```

## LICENSE

[MIT](https://github.com/yyz945947732/gzteacher-auth/blob/master/LICENCE.md)
